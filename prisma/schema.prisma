generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  userId    String     @id @db.VarChar
  password  String     @db.VarChar
  username  String     @db.VarChar
  createdAt DateTime   @db.Timestamp(6)
  role      String     @db.VarChar
  employee  Employee[]
}

model Employee {
  employeeId String     @id @db.VarChar
  firstName  String     @db.VarChar
  lastName   String     @db.VarChar
  birthDate  DateTime   @db.Timestamp(6)
  gender     String     @db.Char(1)
  status     String     @db.VarChar
  userId     String?    @db.VarChar
  ActCount   ActCount[]
  Bpm        Bpm[]
  user       User?      @relation(fields: [userId], references: [userId], onUpdate: NoAction)
  metrics    Metric[]
  PassOut    PassOut[]
  Sos        Sos[]
}

model Metric {
  createdAt     DateTime @db.Timestamp(6)
  employeeId    String   @db.VarChar
  mentalScore   Float?
  physicalScore Float?
  employee      Employee @relation(fields: [employeeId], references: [employeeId], onDelete: Cascade, onUpdate: NoAction)

  @@id([createdAt, employeeId])
}

model ActCount {
  employeeId String   @db.VarChar
  createdAt  DateTime @db.Timestamp(6)
  count      Int
  Employee   Employee @relation(fields: [employeeId], references: [employeeId], onDelete: Cascade, onUpdate: NoAction)

  @@id([employeeId, createdAt])
}

model Bpm {
  employeeId String   @db.VarChar
  createdAt  DateTime @db.Timestamp(6)
  value      Float
  Employee   Employee @relation(fields: [employeeId], references: [employeeId], onDelete: Cascade, onUpdate: NoAction)

  @@id([employeeId, createdAt])
}

model Overall {
  createdAt        DateTime @id @db.Timestamp(6)
  avgMentalScore   Float?
  avgPhysicalScore Float?
}

model PassOut {
  employeeId String   @db.VarChar
  createdAt  DateTime @db.Timestamp(6)
  value      Boolean
  Employee   Employee @relation(fields: [employeeId], references: [employeeId], onDelete: Cascade, onUpdate: NoAction)

  @@id([employeeId, createdAt])
}

model Sos {
  employeeId String   @db.VarChar
  createdAt  DateTime @db.Timestamp(6)
  value      Boolean
  Employee   Employee @relation(fields: [employeeId], references: [employeeId], onDelete: Cascade, onUpdate: NoAction)

  @@id([employeeId, createdAt])
}
